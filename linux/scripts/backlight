#!/bin/bash

HIGH=
LOW=
VALUE=$(light -G | cut -f1 -d".")

icon() {
  if [[ 1 -eq $(echo "$VALUE > 75" | bc -l) ]]; then
    echo "%{F#FF0000}$HIGH%{F-}"
  elif [[ 1 -eq $(echo "$VALUE > 25" | bc -l) ]]; then
    echo $HIGH
  else
    echo $LOW
  fi
}

case $1 in
  if)
    light -L 2>&- | grep monitor
    ;;
  icon)
    icon
    ;;
  inc)
    light -A 2 2>&-
    $($0 show)
    ;;
  dec)
    light -U 2 2>&-
    $($0 show)
    ;;
  show)
    brightness=$(light -G | cut -f1 -d".")

    notify-send -a Backlight \
                -i ~/dotfiles/fonts/fa6/pngs/light/brightness.png \
                -h string:wired-tag:backlight \
                -h int:value:"$VALUE" \
                "unused"
    ;;
esac
